<!DOCTYPE html>
<!--  Last Published: Thu Aug 10 2017 07:10:06 GMT+0000 (UTC)  -->
<html data-wf-page="57f9feb764aad7de18689cb5" data-wf-site="57f9f32654bcd3af639ec7f2" lang="deu">
<head>
  <meta charset="utf-8">
  <title>Amtliches Videokonferenz Portal</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/amtliches-videokonferenz-portal.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({
  google: {
    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Roboto:300,regular,500"]
  }
});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body>
  <div class="navigation-bar w-nav" data-animation="default" data-collapse="medium" data-duration="400">
    <div class="hamburger-button w-nav-button">
      <div class="w-icon-nav-menu"></div>
    </div>
    <nav class="navigation-menu w-clearfix w-nav-menu" role="navigation"><a class="navigation-link w-nav-link" href="index.html">Home</a></nav>
    <div class="navpanel w-container"><img class="logo" src="images/Logo.png">
      <a class="brand-link w-clearfix w-nav-brand" href="index.html">
        <h1 class="brand-text">Amtliches Videokonferenz Portal</h1>
      </a>
    </div>
  </div>
  
  <!-- Programmatically alter Header -->
  <!-- Add BackGround-Image -->
  <div id="headerImageContainer" class="centered hero-section herosectionservicecategorie">
    <div class="w-container" data-ix="new-interaction">
      <!-- Set Name -->
      <h1 id="headerHeading" class="hero-heading" data-ix="fade-in-bottom-page-loads"></h1>
      <!-- Set Beschreibung -->
      <div id="headerSubheading" class="hero-subheading" data-ix="fade-in-bottom-page-loads"></div>
      <div data-ix="fade-in-bottom-page-loads"><a class="button" href="#ServiceAuswahl">Service auswählen</a><a class="all-caps hollow-button" href="#Help">Hilfe</a></div>
    </div>
  </div>
  <!-- Programmatically alter Header ENDE -->
  
  <div class="section" id="ServiceAuswahl">
    <div class="w-container">
      <div class="section-title-group">
        <div class="w-dyn-list">
        
          <!-- Dynamischer Inhalt -->
          <div id="success-dataFound-anfrage" class="w-dyn-items">
			<!-- Inhalt wird programmatisch hinzugefügt -->
          </div>
          <div id="fail-nodata-anfrage" class="w-dyn-empty">
            <div>Keine Einträge gefunden.</div>
          </div>
          <!-- Dynamischer Inhalt ENDE-->
          
        </div>
      </div>
    </div>
  </div>
  <div class="section" id="Help">
    <div class="w-container">
      <div class="section-title-group">
        <h2 class="centered section-heading">Wie es funktioniert</h2>
      </div>
      <div class="w-clearfix white-box whiteboxhelp"><img class="grid-image help" src="images/feather2-22-white.svg">
        <h3>Service wählen</h3>
        <p>Wählen Sie über eine einfach Suche oder über unseren Servicekatalog aus, zu welchem Themengebiet sie beraten werden möchten</p>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="w-container">
      <div class="w-row">
        <div class="spc w-col w-col-6">
          <h5>über das portal</h5>
          <p>Das Portal versucht Bürger und Ämter einfacher in Kontakt treten zu lassen. Entstanden ist es aus einem Forschungsprojekt der Hochschule Mainz.</p>
        </div>
        <div class="spc w-col w-col-6">
          <h5>Nützliche links</h5><a class="footer-link" href="misc/weitereinformationen.html">Weitere Informationen</a><a class="footer-link" href="misc/impressum.html">Impressum</a></div>
      </div>
    </div>
  </div>
  <div class="center footer"></div>
  <script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"
		type="text/javascript">
  </script>
  <script>
	var host = "localhost";
	
	$( function( ){
		var errOcc = false;
		
  	  	$( "#fail-nodata-anfrage" ).hide( "fast" );
		$( "#success-dataFound-anfrage" ).hide( "fast" );
      	
		var urlParams = getUrlParams();
		
		$.ajax({
  	    	headers: { 
  	    	    "Accept": "application/json",
  	        	"Content-Type": "application/json"
  	    	},
  		  	url: "http://" + host + ":8080/requestHandler/rest/request/getData/ServicekategorieEinzeldaten/?user=AVP_Frontend&userAuth=test",
  	    	type: "POST",
  	    	dataType: "json",
  	    	data: "{\"variables\": {\"BERATUNGSGEBIET_ID\":" + urlParams.ID + "}}"
  		})
  		  .fail(function(data){
    		$( "#fail-nodata-anfrage" ).show( "fast" );
      		$( "#success-dataFound-anfrage" ).hide( "fast" );
    		
    		if ( console && console.log ) {
    	  		console.log( data );
    	  	}
  		  })
  		  .done(function( data ) {
  		  	if ( console && console.log ) {
	  			var beratungsthema = data.RESULT[0];
	  			
    				if(beratungsthema.IMAGE) $("#headerImageContainer").css("background-image", "url(" + beratungsthema.IMAGE + ")");
   					if(beratungsthema.NAME) $("#headerHeading").text(beratungsthema.NAME);
   					if(beratungsthema.BESCHREIBUNG) $("#headerSubheading").text(beratungsthema.BESCHREIBUNG);
   					if(beratungsthema.SERVICES){
   						var services = beratungsthema.SERVICES;
   						if(services && services.length > 0){
	   						for(service of services){
	   							if(service.NAME){
		  	  		  				addTemplate($( '#success-dataFound-anfrage' ), 
		  	  		  							service.NAME, 
		  	  		  							beratungsthema.ID, 
		  	  		  							service.ID);
	  		    				}else{
	  		    					errOcc = true;
	  		    				}
	   						}
   						}else{
   							errOcc = true;
   						}
   					}
    			}else{
 		    		console.log( "Beratungsthema ID korrupt!" );
  		    		errOcc = true;
    			}
  		    })
  		  .always(function() {
  			    $.getScript("js/webflow.js", function(){
  			      //Do nothing yet
  			  	});
  			  
	    		if(errOcc){
	    	  	  		$( "#fail-nodata-anfrage" ).show( "fast" );
	    				$( "#success-dataFound-anfrage" ).hide( "fast" );
	    		}else{
	    	  	  		$( "#fail-nodata-anfrage" ).hide( "fast" );
	    				$( "#success-dataFound-anfrage" ).show( "fast" );
	    		}
    	  });
	});
	
	
	function getUrlParams(){
		var params = {};

		if (location.search) {
		    var parts = location.search.substring(1).split('&');

		    for (var i = 0; i < parts.length; i++) {
		        var nv = parts[i].split('=');
		        if (!nv[0]) continue;
		        params[nv[0]] = nv[1] || true;
		    }
		}
		
		return params;
	}
	
	function addTemplate(node, name, beratungsgebiet, id){
		jQuery.get('Templates/HTML-Snippets/Beratungsservice.html', function(template) {
			   
			var filledInTemplate = template.replace("%NAME%", name);
		 	filledInTemplate = filledInTemplate.replace("%BERATUNGSGEBIET%", beratungsgebiet);
		 	filledInTemplate = filledInTemplate.replace("%ID%", id);
			
		 	node.append(filledInTemplate);  
		});
		
		$.expr[":"].contains = $.expr.createPseudo(function(arg) {
		    return function( elem ) {
		        return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
		    };
		});
	}
  </script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>